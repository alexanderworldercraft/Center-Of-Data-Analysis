"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.importGlobOff = importGlobOff;
exports.importGlobOn = importGlobOn;
const node_fs_1 = require("node:fs");
const utils_1 = require("../utils");
const dir = __dirname + (() => '')(); // trick to avoid `@vercel/ncc` to glob import
const telefuncFilesGlobPath = `${dir}/telefuncFilesGlob.js`;
const importGlob = `import.meta.glob("/**/*.telefunc.${utils_1.scriptFileExtensions}")`;
function importGlobOff() {
    (0, node_fs_1.writeFileSync)(telefuncFilesGlobPath, ['exports.importGlobOff = true', ''].join('\n'));
}
function importGlobOn() {
    (0, node_fs_1.writeFileSync)(telefuncFilesGlobPath, 
    // prettier-ignore
    [
        `export const telefuncFilesGlob = ${importGlob};`,
        // 'console.log("`.telefunc.js` files", Object.keys(telefuncFilesGlob))',
        '',
    ].join('\n'));
}
