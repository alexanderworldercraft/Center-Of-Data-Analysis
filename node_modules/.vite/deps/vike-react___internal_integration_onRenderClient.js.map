{
  "version": 3,
  "sources": ["../../react-dom/client.js", "../../vike-react/dist/integration/onRenderClient.js", "../../vike-react/dist/utils/isCallable.js", "../../vike-react/dist/hooks/useConfig/configsCumulative.js", "../../vike-react/dist/utils/includes.js", "../../vike-react/dist/integration/getHeadSetting.js", "../../vike-react/dist/integration/getPageElement.js", "../../vike-react/dist/utils/callCumulativeHooks.js", "../../vike-react/dist/integration/applyHeadSettings.js"],
  "sourcesContent": ["'use strict';\n\nvar m = require('react-dom');\nif (process.env.NODE_ENV === 'production') {\n  exports.createRoot = m.createRoot;\n  exports.hydrateRoot = m.hydrateRoot;\n} else {\n  var i = m.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;\n  exports.createRoot = function(c, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.createRoot(c, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n  exports.hydrateRoot = function(c, h, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.hydrateRoot(c, h, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n}\n", "// https://vike.dev/onRenderClient\nexport { onRenderClient };\nimport ReactDOM from 'react-dom/client';\nimport { getHeadSetting } from './getHeadSetting.js';\nimport { getPageElement } from './getPageElement.js';\nimport './styles.css';\nimport { callCumulativeHooks } from '../utils/callCumulativeHooks.js';\nimport { applyHeadSettings } from './applyHeadSettings.js';\nlet root;\nconst onRenderClient = async (pageContext) => {\n    pageContext._headAlreadySet = pageContext.isHydration;\n    // Use case:\n    // - Store hydration https://github.com/vikejs/vike-react/issues/110\n    await callCumulativeHooks(pageContext.config.onBeforeRenderClient, pageContext);\n    const { page, renderPromise } = getPageElement(pageContext);\n    pageContext.page = page;\n    // TODO: implement this? So that, upon errors, onRenderClient() throws an error and Vike can render the error. As of April 2024 it isn't released yet.\n    //  - https://react-dev-git-fork-rickhanlonii-rh-root-options-fbopensource.vercel.app/reference/react-dom/client/createRoot#show-a-dialog-for-uncaught-errors\n    //  - https://react-dev-git-fork-rickhanlonii-rh-root-options-fbopensource.vercel.app/reference/react-dom/client/hydrateRoot#show-a-dialog-for-uncaught-errors\n    const onUncaughtError = (_error, _errorInfo) => { };\n    const container = document.getElementById('root');\n    if (pageContext.isHydration &&\n        // Whether the page was [Server-Side Rendered](https://vike.dev/ssr).\n        container.innerHTML !== '') {\n        // First render while using SSR, i.e. [hydration](https://vike.dev/hydration)\n        root = ReactDOM.hydrateRoot(container, page, {\n            // @ts-expect-error\n            onUncaughtError,\n        });\n    }\n    else {\n        if (!root) {\n            // First render without SSR\n            root = ReactDOM.createRoot(container, {\n                // @ts-expect-error\n                onUncaughtError,\n            });\n        }\n        root.render(page);\n    }\n    pageContext.root = root;\n    await renderPromise;\n    if (!pageContext.isHydration) {\n        pageContext._headAlreadySet = true;\n        applyHead(pageContext);\n    }\n    // Use cases:\n    // - Custom user settings: https://vike.dev/head-tags#custom-settings\n    // - Testing tools: https://github.com/vikejs/vike-react/issues/95\n    await callCumulativeHooks(pageContext.config.onAfterRenderClient, pageContext);\n};\nfunction applyHead(pageContext) {\n    const title = getHeadSetting('title', pageContext);\n    const lang = getHeadSetting('lang', pageContext);\n    applyHeadSettings(title, lang);\n}\n", "export function isCallable(thing) {\n    return thing instanceof Function || typeof thing === 'function';\n}\n", "export const configsCumulative = ['Head', 'bodyAttributes', 'htmlAttributes'];\n", "// https://stackoverflow.com/questions/56565528/typescript-const-assertions-how-to-use-array-prototype-includes/74213179#74213179\n/** Same as Array.prototype.includes() but with type inference */\nexport function includes(values, x) {\n    return values.includes(x);\n}\n/*\nexport function includes<Arr extends any[] | readonly any[]>(arr: Arr, el: unknown): el is Arr[number] {\n  return arr.includes(el as any)\n}\n*/\n", "export { getHeadSetting };\nimport { isCallable } from '../utils/isCallable.js';\nimport { configsCumulative } from '../hooks/useConfig/configsCumulative.js';\nimport { includes } from '../utils/includes.js';\n// We use `any` instead of doing proper validation in order to save KBs sent to the client-side.\nfunction getHeadSetting(configName, pageContext) {\n    // Set by useConfig()\n    const valFromUseConfig = pageContext._configFromHook?.[configName];\n    // Set by +configName.js\n    const valFromConfig = pageContext.config[configName];\n    const getCallable = (val) => (isCallable(val) ? val(pageContext) : val);\n    if (!includes(configsCumulative, configName)) {\n        if (valFromUseConfig !== undefined)\n            return valFromUseConfig;\n        return getCallable(valFromConfig);\n    }\n    else {\n        return [\n            //\n            ...(valFromConfig ?? []).map(getCallable),\n            ...(valFromUseConfig ?? []),\n        ];\n    }\n}\n", "export { getPageElement };\nimport React, { Suspense, useEffect } from 'react';\nimport { PageContextProvider } from '../hooks/usePageContext.js';\nfunction getPageElement(pageContext) {\n    const { Page, config: { Loading }, } = pageContext;\n    let page = Page ? React.createElement(Page, null) : null;\n    // Wrapping\n    const addSuspense = (el) => {\n        if (!Loading?.layout)\n            return el;\n        return React.createElement(Suspense, { fallback: React.createElement(Loading.layout, null) }, page);\n    };\n    page = addSuspense(page);\n    [\n        // Inner wrapping\n        ...(pageContext.config.Layout || []),\n        // Outer wrapping\n        ...(pageContext.config.Wrapper || []),\n    ].forEach((Wrap) => {\n        page = React.createElement(Wrap, null, page);\n        page = addSuspense(page);\n    });\n    page = React.createElement(PageContextProvider, { pageContext: pageContext }, page);\n    let renderPromiseResolve;\n    let renderPromise = new Promise((r) => (renderPromiseResolve = r));\n    page = React.createElement(RenderPromiseProvider, { renderPromiseResolve: renderPromiseResolve }, page);\n    if (pageContext.config.reactStrictMode !== false) {\n        page = React.createElement(React.StrictMode, null, page);\n    }\n    return { page, renderPromise };\n}\nfunction RenderPromiseProvider({ children, renderPromiseResolve, }) {\n    useEffect(renderPromiseResolve);\n    return children;\n}\n", "export { callCumulativeHooks };\nimport { providePageContext } from 'vike/getPageContext';\nasync function callCumulativeHooks(values, pageContext) {\n    if (!values)\n        return [];\n    const valuesPromises = values.map((val) => {\n        if (typeof val === 'function') {\n            providePageContext(pageContext);\n            // Hook\n            return val(pageContext);\n        }\n        else {\n            // Plain value\n            return val;\n        }\n    });\n    const valuesResolved = await Promise.all(valuesPromises);\n    return valuesResolved;\n}\n", "export { applyHeadSettings };\n// - We skip if `undefined` as we shouldn't remove values set by the Head setting.\n// - Setting a default prevents the previous value to be leaked: upon client-side navigation, the value set by the previous page won't be removed if the next page doesn't override it.\n//   - Most of the time, the user sets a default himself (i.e. a value defined at /pages/+config.js)\n//     - If he doesn't have a default then he can use `null` to opt into Vike's defaults\nfunction applyHeadSettings(title, lang) {\n    if (title !== undefined)\n        document.title = title || '';\n    if (lang !== undefined)\n        document.documentElement.lang = lang || 'en';\n}\n"],
  "mappings": "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",
  "names": ["React", "ReactDOM"]
}
